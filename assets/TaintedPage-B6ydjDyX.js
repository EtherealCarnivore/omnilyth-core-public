import{r as N,j as e,u as v}from"./index-StS4Kiu4.js";import{f}from"./mathUtils-DBoKL8H6.js";function k(i,s,g,r){const l=i-s-g-r;let a=0;for(let c=0;c<=l;c++)for(let d=0;d<=l-c;d++){const b=l-c-d,u=s+c,m=g+d,t=r+b,n=f(i)/(f(u)*f(m)*f(t));a+=n/Math.pow(3,i)}const p=1/a,h=Math.sqrt((1-a)/(a*a));return{chance:a,avgAttempts:p,stdDev:h}}function y({prices:i}){const[s,g]=N.useState({sockets:"",red:"",green:"",blue:""}),[r,l]=N.useState(null),[a,p]=N.useState(""),h=i?.["tainted-chromatic-orb"]?.chaosRate;function c(t,n){g(x=>({...x,[t]:n}))}function d(){const t=s.red===""?0:parseInt(s.red,10),n=s.green===""?0:parseInt(s.green,10),x=s.blue===""?0:parseInt(s.blue,10);let o=s.sockets===""?null:parseInt(s.sockets,10);if(o===null){const j=t+n+x;j>0&&j<=6&&(o=j,c("sockets",String(j)))}if(!o||o<1||o>6){p("Total sockets must be between 1 and 6."),l(null);return}if(t<0||n<0||x<0){p("Desired colors must be non-negative."),l(null);return}if(t+n+x>o){p(`Desired colors (${t+n+x}) exceed total sockets (${o}).`),l(null);return}p(""),l(k(o,t,n,x))}const b=s.sockets===""?null:parseInt(s.sockets,10),u=s.sockets!==""&&(isNaN(b)||b<1||b>6);function m(t){t.key==="Enter"&&!u&&d()}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-purple-300",children:"Tainted Chromatic Calculator"}),e.jsxs("p",{className:"text-sm text-zinc-400",children:["Tainted Chromatic Orbs reroll each socket with an equal ",e.jsx("strong",{className:"text-zinc-100",children:"1/3"})," chance per color, ignoring stat requirements."]}),e.jsx("p",{className:"text-sm font-semibold text-red-400 mt-2",children:"Warning: Tainted Chromatic Orbs can only be used on corrupted items!"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 max-w-md mx-auto",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-zinc-400 text-center",children:"Sockets"}),e.jsx("input",{type:"number",placeholder:"#",value:s.sockets,onChange:t=>c("sockets",t.target.value),onKeyDown:m,className:"calc-input w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-red-400",children:"Red"}),e.jsx("input",{type:"number",placeholder:"R",value:s.red,onChange:t=>c("red",t.target.value),onKeyDown:m,className:"calc-input w-full bg-poe-red border-poe-red-border focus:ring-red-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-green-400",children:"Green"}),e.jsx("input",{type:"number",placeholder:"G",value:s.green,onChange:t=>c("green",t.target.value),onKeyDown:m,className:"calc-input w-full bg-poe-green border-poe-green-border focus:ring-green-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-blue-400",children:"Blue"}),e.jsx("input",{type:"number",placeholder:"B",value:s.blue,onChange:t=>c("blue",t.target.value),onKeyDown:m,className:"calc-input w-full bg-poe-blue border-poe-blue-border focus:ring-blue-500/40"})]})]}),u&&e.jsx("p",{className:"text-center text-red-400 text-sm",children:"Total sockets must be between 1 and 6."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:d,disabled:u,className:"calc-button bg-purple-900/60 hover:bg-purple-800/60 border-purple-600/50 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:transform-none",children:"Calculate"})}),a&&!u&&e.jsx("p",{className:"text-center text-red-400 text-sm",children:a}),r&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-zinc-400 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"px-4 py-2 text-center",children:"Success Chance"}),e.jsxs("th",{className:"px-4 py-2 text-center",children:["Avg. Tainted Chromes",e.jsx("span",{className:"block text-[10px] normal-case tracking-normal opacity-60",children:"(mean)"})]}),h&&e.jsxs("th",{className:"px-4 py-2 text-center",children:["Avg. Cost",e.jsx("span",{className:"block text-[10px] normal-case tracking-normal opacity-60",children:"(in chaos)"})]}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Std. Deviation"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-poe-row-even",children:[e.jsxs("td",{className:"px-4 py-3 text-center font-mono",children:[(r.chance*100).toFixed(4),"%"]}),e.jsx("td",{className:"px-4 py-3 text-center font-mono text-poe-highlight",children:r.avgAttempts.toFixed(2)}),h&&e.jsxs("td",{className:"px-4 py-3 text-center font-mono text-poe-gold",children:[(r.avgAttempts*h).toFixed(1),"c"]}),e.jsx("td",{className:"px-4 py-3 text-center font-mono",children:r.stdDev.toFixed(2)})]})})]})})]})}function D(){const{prices:i}=v();return e.jsx("div",{className:"glass-card rounded-2xl p-6 sm:p-8",children:e.jsx(y,{prices:i})})}export{D as default};
