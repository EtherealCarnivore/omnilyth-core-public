import{r as N,j as e,u as v}from"./index-BQTyQAd2.js";import{f as j}from"./mathUtils-DBoKL8H6.js";function k(i,s,g,r){const l=i-s-g-r;let c=0;for(let n=0;n<=l;n++)for(let d=0;d<=l-n;d++){const b=l-n-d,p=s+n,m=g+d,t=r+b,a=j(i)/(j(p)*j(m)*j(t));c+=a/Math.pow(3,i)}const u=1/c,h=Math.sqrt((1-c)/(c*c));return{chance:c,avgAttempts:u,stdDev:h}}function y({prices:i}){const[s,g]=N.useState({sockets:"",red:"",green:"",blue:""}),[r,l]=N.useState(null),[c,u]=N.useState(""),h=i?.["tainted-chromatic-orb"]?.chaosRate;function n(t,a){g(x=>({...x,[t]:a}))}function d(){const t=s.red===""?0:parseInt(s.red,10),a=s.green===""?0:parseInt(s.green,10),x=s.blue===""?0:parseInt(s.blue,10);let o=s.sockets===""?null:parseInt(s.sockets,10);if(o===null){const f=t+a+x;f>0&&f<=6&&(o=f,n("sockets",String(f)))}if(!o||o<1||o>6){u("Total sockets must be between 1 and 6."),l(null);return}if(t<0||a<0||x<0){u("Desired colors must be non-negative."),l(null);return}if(t+a+x>o){u(`Desired colors (${t+a+x}) exceed total sockets (${o}).`),l(null);return}u(""),l(k(o,t,a,x))}const b=s.sockets===""?null:parseInt(s.sockets,10),p=s.sockets!==""&&(isNaN(b)||b<1||b>6);function m(t){t.key==="Enter"&&!p&&d()}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-purple-300",children:"Tainted Chromatic Calculator"}),e.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Tainted Chromatic Orbs reroll each socket with an equal ",e.jsx("strong",{className:"text-zinc-100",children:"1/3"})," chance per color, ignoring stat requirements."]}),e.jsx("p",{className:"text-sm font-semibold text-red-400 mt-2",children:"Warning: Tainted Chromatic Orbs can only be used on corrupted items!"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 max-w-md mx-auto",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-zinc-400 text-center",children:"Sockets"}),e.jsx("input",{type:"number",placeholder:"#",value:s.sockets,onChange:t=>n("sockets",t.target.value),onKeyDown:m,className:"calc-input w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-red-400",children:"Red"}),e.jsx("input",{type:"number",placeholder:"R",value:s.red,onChange:t=>n("red",t.target.value),onKeyDown:m,className:"calc-input w-full bg-poe-red border-poe-red-border focus:ring-red-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-green-400",children:"Green"}),e.jsx("input",{type:"number",placeholder:"G",value:s.green,onChange:t=>n("green",t.target.value),onKeyDown:m,className:"calc-input w-full bg-poe-green border-poe-green-border focus:ring-green-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-blue-400",children:"Blue"}),e.jsx("input",{type:"number",placeholder:"B",value:s.blue,onChange:t=>n("blue",t.target.value),onKeyDown:m,className:"calc-input w-full bg-poe-blue border-poe-blue-border focus:ring-blue-500/40"})]})]}),p&&e.jsx("p",{className:"text-center text-red-400 text-sm",children:"Total sockets must be between 1 and 6."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:d,disabled:p,className:"calc-button bg-purple-900/60 hover:bg-purple-800/60 border-purple-600/50 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:transform-none",children:"Calculate"})}),c&&!p&&e.jsx("p",{className:"text-center text-red-400 text-sm",children:c}),r&&e.jsx("div",{className:"overflow-x-auto rounded-lg border border-white/5",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("th",{className:"px-4 py-2 text-center text-zinc-400 font-medium",children:"Success Chance"}),e.jsxs("th",{className:"px-4 py-2 text-center text-zinc-400 font-medium",children:["Avg. Tainted Chromes",e.jsx("span",{className:"block text-[10px] normal-case tracking-normal opacity-60",children:"(mean)"})]}),h&&e.jsxs("th",{className:"px-4 py-2 text-center text-zinc-400 font-medium",children:["Avg. Cost",e.jsx("span",{className:"block text-[10px] normal-case tracking-normal opacity-60",children:"(in chaos)"})]}),e.jsx("th",{className:"px-4 py-2 text-center text-zinc-400 font-medium",children:"Std. Deviation"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-poe-row-even",children:[e.jsxs("td",{className:"px-4 py-3 text-center font-mono",children:[(r.chance*100).toFixed(4),"%"]}),e.jsx("td",{className:"px-4 py-3 text-center font-mono text-poe-highlight",children:r.avgAttempts.toFixed(2)}),h&&e.jsxs("td",{className:"px-4 py-3 text-center font-mono text-poe-gold",children:[(r.avgAttempts*h).toFixed(1),"c"]}),e.jsx("td",{className:"px-4 py-3 text-center font-mono",children:r.stdDev.toFixed(2)})]})})]})})]})}function D(){const{prices:i}=v();return e.jsx("div",{className:"glass-card rounded-2xl p-6 sm:p-8",children:e.jsx(y,{prices:i})})}export{D as default};
