import{c as B,r as o,d as P,j as e}from"./index-BlQCsTae.js";function M(){const{patterns:t,storageInfo:r,cookiesEnabled:j,loading:v,remove:w,clearAll:b}=B(),[a,h]=o.useState(""),[i,u]=o.useState("all"),[y,c]=o.useState(!1),[N,d]=o.useState(!1),[k,x]=o.useState(null),m=P(),C=o.useMemo(()=>{const s=new Set(t.map(l=>l.tool));return Array.from(s).map(l=>{const n=t.find(H=>H.tool===l);return{id:l,label:n?.toolLabel||l}})},[t]),g=o.useMemo(()=>{let s=t;if(i!=="all"&&(s=s.filter(l=>l.tool===i)),a.trim()){const l=a.toLowerCase();s=s.filter(n=>n.name.toLowerCase().includes(l)||n.pattern.toLowerCase().includes(l)||n.toolLabel.toLowerCase().includes(l))}return s},[t,i,a]),L=s=>{navigator.clipboard.writeText(s.pattern)},z=s=>{x(s),c(!0)},S=async()=>{await w(k),c(!1),x(null)},p=()=>{c(!1),x(null)},A=()=>{d(!0)},D=async()=>{await b(),d(!1)},f=()=>{d(!1)},T=s=>{const n={chromatic:"/chromatic",socket:"/socket",fusing:"/fusing","map-mod":"/map-mod","vendor-leveling":"/leveling/vendor-regex"}[s];n&&m(n)};return v?e.jsx("div",{className:"max-w-6xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"glass-card rounded-xl p-8 text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-poe-gold border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-zinc-400",children:"Loading patterns..."})]})}):j?e.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{className:"glass-card rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-poe-gold mb-2",children:"Regex Library"}),e.jsx("p",{className:"text-zinc-400",children:"Your saved regex patterns from all tools"})]}),t.length>0&&e.jsxs("button",{onClick:A,className:`glass-card px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-red-500/10
                       hover:text-red-500 transition-colors focus:outline-none focus:ring-2
                       focus:ring-red-500/50`,style:{minHeight:"44px"},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Clear All"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-400",children:"Patterns:"}),e.jsx("span",{className:"font-bold text-white",children:r.patternCount})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-400",children:"Storage:"}),e.jsxs("span",{className:`font-bold ${r.nearLimit?"text-yellow-500":"text-white"}`,children:[r.percentUsed,"%"]})]}),r.nearLimit&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),e.jsxs("span",{className:"text-xs",children:["~",r.estimatedSlotsRemaining," slots left"]})]})]})]}),t.length>0&&e.jsxs("div",{className:"glass-card rounded-xl p-4 flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:a,onChange:s=>h(s.target.value),placeholder:"Search patterns...",className:`w-full bg-zinc-900/50 border border-zinc-800 rounded-lg px-4 py-2 text-white
                       focus:outline-none focus:ring-2 focus:ring-poe-gold/50 focus:border-poe-gold`,style:{minHeight:"44px",fontSize:"max(16px, 1rem)"}})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:i,onChange:s=>u(s.target.value),className:`w-full bg-zinc-900/50 border border-zinc-800 rounded-lg px-4 py-2 text-white
                       focus:outline-none focus:ring-2 focus:ring-poe-gold/50 focus:border-poe-gold`,style:{minHeight:"44px",fontSize:"max(16px, 1rem)"},children:[e.jsx("option",{value:"all",children:"All Tools"}),C.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})})]}),g.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:g.map(s=>e.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-white truncate",children:s.name}),e.jsx("button",{onClick:()=>T(s.tool),className:"text-sm text-poe-gold hover:text-poe-gold-bright transition-colors",children:s.toolLabel})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>L(s),className:`p-2 rounded-lg hover:bg-zinc-700/30 transition-colors
                             focus:outline-none focus:ring-2 focus:ring-poe-gold/50`,"aria-label":"Copy pattern",title:"Copy to clipboard",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),e.jsx("button",{onClick:()=>z(s.id),className:`p-2 rounded-lg hover:bg-red-500/10 hover:text-red-500 transition-colors
                             focus:outline-none focus:ring-2 focus:ring-red-500/50`,"aria-label":"Delete pattern",title:"Delete pattern",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]}),e.jsx("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-lg p-3 overflow-x-auto",children:e.jsx("code",{className:"text-sm font-mono text-white whitespace-pre-wrap break-all",children:s.pattern})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{children:["Created: ",new Date(s.createdAt).toLocaleDateString()]}),s.updatedAt!==s.createdAt&&e.jsxs("span",{children:["Updated: ",new Date(s.updatedAt).toLocaleDateString()]})]})]},s.id))}):t.length>0?e.jsxs("div",{className:"glass-card rounded-xl p-12 text-center space-y-4",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-16 h-16 mx-auto text-zinc-600",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"No patterns found"}),e.jsx("p",{className:"text-zinc-400",children:"Try adjusting your search or filter"})]}),e.jsx("button",{onClick:()=>{h(""),u("all")},className:`glass-card px-4 py-2 rounded-lg hover:bg-poe-gold/10 transition-colors
                     focus:outline-none focus:ring-2 focus:ring-poe-gold/50`,style:{minHeight:"44px"},children:"Clear Filters"})]}):e.jsxs("div",{className:"glass-card rounded-xl p-12 text-center space-y-4",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-16 h-16 mx-auto text-zinc-600",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"No saved patterns yet"}),e.jsx("p",{className:"text-zinc-400 mb-4",children:"Start saving regex patterns from any tool to build your library"}),e.jsx("button",{onClick:()=>m("/"),className:`glass-card px-6 py-3 rounded-lg hover:bg-poe-gold/10 transition-colors
                       focus:outline-none focus:ring-2 focus:ring-poe-gold/50`,style:{minHeight:"44px"},children:"Browse Tools"})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:p,children:e.jsxs("div",{className:"glass-card rounded-xl p-6 max-w-md w-full space-y-4",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete Pattern?"}),e.jsx("p",{className:"text-zinc-400",children:"Are you sure you want to delete this pattern? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:p,className:`flex-1 glass-card px-4 py-2 rounded-lg hover:bg-zinc-700/30 transition-colors
                         focus:outline-none focus:ring-2 focus:ring-zinc-500/50`,style:{minHeight:"44px"},children:"Cancel"}),e.jsx("button",{onClick:S,className:`flex-1 bg-red-500 hover:bg-red-600 text-white font-bold px-4 py-2
                         rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500/50`,style:{minHeight:"44px"},children:"Delete"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:f,children:e.jsxs("div",{className:"glass-card rounded-xl p-6 max-w-md w-full space-y-4",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-red-500",children:"Clear All Patterns?"}),e.jsxs("p",{className:"text-zinc-400",children:["Are you sure you want to delete all ",t.length," saved patterns? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:f,className:`flex-1 glass-card px-4 py-2 rounded-lg hover:bg-zinc-700/30 transition-colors
                         focus:outline-none focus:ring-2 focus:ring-zinc-500/50`,style:{minHeight:"44px"},children:"Cancel"}),e.jsx("button",{onClick:D,className:`flex-1 bg-red-500 hover:bg-red-600 text-white font-bold px-4 py-2
                         rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500/50`,style:{minHeight:"44px"},children:"Clear All"})]})]})})]}):e.jsx("div",{className:"max-w-6xl mx-auto p-4 sm:p-6",children:e.jsx("div",{className:"glass-card rounded-xl p-8 space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4 text-red-500",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 flex-shrink-0",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Cookies Disabled"}),e.jsx("p",{className:"text-zinc-400",children:"The Regex Library requires cookies to be enabled to save patterns. Please enable cookies in your browser settings and refresh the page."})]})]})})})}export{M as default};
