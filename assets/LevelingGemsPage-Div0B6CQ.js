import{f as A,j as e,r as m}from"./index-Bdd_yt19.js";import{a as M,A as L,c as G,b as T,d as w,C as B,F as q,G as W}from"./FloatingSearchButton-Cscfopo6.js";function F({filters:s,onFilterChange:n,className:d=""}){const{selectedClass:t}=A(),r=c=>{const a=s.types.includes(c)?s.types.filter(x=>x!==c):[...s.types,c];n({...s,types:a})},g=c=>{const a=s.acts.includes(c)?s.acts.filter(x=>x!==c):[...s.acts,c];n({...s,acts:a})},p=c=>{const a=s.sources.includes(c)?s.sources.filter(x=>x!==c):[...s.sources,c];n({...s,sources:a})},j=()=>{n({types:["active","support"],acts:[1,2,3,4,5,6,7,8,9,10],sources:["quest","siosa","lilly"],searchTerm:""})},v=s.types.length<2||s.acts.length<10||s.sources.length<3;return e.jsxs("div",{className:`bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] rounded-lg ${d}`,children:[e.jsxs("div",{className:"p-4 border-b border-white/[0.06] flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-200",children:"Filters"}),v&&e.jsx("button",{onClick:j,className:"text-xs text-amber-400 hover:text-amber-300 transition-colors",children:"Reset All"})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wide mb-3",children:"Gem Type"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.types.includes("active"),onChange:()=>r("active"),className:"w-4 h-4 rounded border-2 border-zinc-700 bg-zinc-800 checked:bg-amber-500 checked:border-amber-500 focus:ring-2 focus:ring-amber-500/20 transition-colors"}),e.jsx("span",{className:"text-sm text-zinc-300 group-hover:text-zinc-100 transition-colors",children:"Active Skills"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.types.includes("support"),onChange:()=>r("support"),className:"w-4 h-4 rounded border-2 border-zinc-700 bg-zinc-800 checked:bg-blue-500 checked:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-colors"}),e.jsx("span",{className:"text-sm text-zinc-300 group-hover:text-zinc-100 transition-colors",children:"Support Gems"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wide mb-3",children:"Available in Acts"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(c=>e.jsx("button",{onClick:()=>g(c),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${s.acts.includes(c)?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-zinc-800/40 text-zinc-500 border border-white/[0.04] hover:text-zinc-300 hover:border-white/[0.08]"}`,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wide mb-3",children:"Availability Source"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.sources.includes("quest"),onChange:()=>p("quest"),className:"w-4 h-4 rounded border-2 border-zinc-700 bg-zinc-800 checked:bg-green-500 checked:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-colors"}),e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-300 group-hover:text-zinc-100 transition-colors",children:"Quest Rewards"}),e.jsx("span",{className:"text-xs text-green-400",children:"âœ…"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.sources.includes("siosa"),onChange:()=>p("siosa"),className:"w-4 h-4 rounded border-2 border-zinc-700 bg-zinc-800 checked:bg-purple-500 checked:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-colors"}),e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-300 group-hover:text-zinc-100 transition-colors",children:"Siosa (Act 3)"}),e.jsx("span",{className:"text-xs text-purple-400",children:"ðŸ”“"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.sources.includes("lilly"),onChange:()=>p("lilly"),className:"w-4 h-4 rounded border-2 border-zinc-700 bg-zinc-800 checked:bg-purple-500 checked:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-colors"}),e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-300 group-hover:text-zinc-100 transition-colors",children:"Lilly Roth (Act 6)"}),e.jsx("span",{className:"text-xs text-purple-400",children:"ðŸ”“"})]})]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-zinc-800/40 border border-white/[0.04]",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Filtering for:"}),e.jsx("div",{className:"text-sm font-medium text-zinc-300",children:t==="all"?"All Classes":t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx("div",{className:"text-xs text-zinc-500 mt-2",children:"Change class in header dropdown"})]})]})]})}function O({gems:s,selectedClass:n,onSelectGem:d}){return s.length===0?e.jsxs("div",{className:"col-span-full bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] rounded-lg p-12 text-center",children:[e.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 text-zinc-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 8v4M12 16h.01"})]}),e.jsx("h3",{className:"text-lg font-medium text-zinc-300 mb-2",children:"No gems found"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Try adjusting your filters or search term"})]}):e.jsx(e.Fragment,{children:s.map(t=>{const r=M(t.name,n);return e.jsxs("button",{onClick:()=>d(t),className:"group relative bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] hover:border-amber-500/30 rounded-lg p-3 transition-all hover:scale-105",children:[e.jsx("div",{className:"relative aspect-square mb-2",children:e.jsx("img",{src:t.icon,alt:t.name,className:"w-full h-full object-cover rounded",loading:"lazy"})}),e.jsxs("div",{className:"flex items-start justify-between gap-1 mb-1",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-200 group-hover:text-zinc-100 line-clamp-2 flex-1",children:t.name}),e.jsx("span",{className:`text-base flex-shrink-0 ${t.type==="support"?"text-blue-400":"text-amber-400"}`,title:t.type==="support"?"Support":"Active",children:t.type==="support"?"ðŸ”—":"âš¡"})]}),t.requiredLevel&&e.jsxs("div",{className:"text-xs text-zinc-500",children:["Lvl ",t.requiredLevel]}),e.jsx("div",{className:"hidden lg:block absolute inset-0 bg-zinc-900/95 backdrop-blur-sm border border-amber-500/50 rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-100 mb-1",children:t.name}),e.jsxs("div",{className:"text-xs text-zinc-400 flex items-center gap-1 mb-2",children:[e.jsx("span",{children:t.type==="support"?"ðŸ”— Support":"âš¡ Active"}),t.requiredLevel&&e.jsxs("span",{children:["â€¢ Lvl ",t.requiredLevel]})]})]}),r&&e.jsx("div",{className:"text-xs",children:e.jsx(L,{availability:r})})]})})]},t.gemId)})})}function D({gems:s,selectedClass:n,onSelectGem:d}){return s.length===0?e.jsxs("div",{className:"bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] rounded-lg p-12 text-center",children:[e.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 text-zinc-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 8v4M12 16h.01"})]}),e.jsx("h3",{className:"text-lg font-medium text-zinc-300 mb-2",children:"No gems found"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Try adjusting your filters or search term"})]}):e.jsx("div",{className:"space-y-2",children:s.map(t=>{const r=G(t.name,n);return r?.length,e.jsx("button",{onClick:()=>d(t),className:"w-full bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] hover:border-amber-500/30 rounded-lg p-4 transition-colors text-left group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.icon,alt:t.name,className:"w-10 h-10 flex-shrink-0 rounded",loading:"lazy"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"text-sm font-medium text-zinc-200 group-hover:text-zinc-100",children:t.name})}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-zinc-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:t.type==="support"?"text-blue-400":"text-amber-400",children:t.type==="support"?"ðŸ”—":"âš¡"}),t.type==="support"?"Support":"Active"]}),t.requiredLevel&&e.jsxs("span",{children:["Lvl ",t.requiredLevel]}),r&&r.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[r[0].source==="quest"&&"ðŸ“œ Quest",r[0].source==="siosa"&&"â­ Siosa",r[0].source==="lilly"&&"â­ Lilly",r[0].source==="vendor"&&"ðŸª Vendor",r.length>1&&` +${r.length-1}`]}),(!r||r.length===0)&&e.jsx("span",{className:"text-red-400",children:"Not available"})]}),e.jsx("div",{className:"flex-shrink-0 text-zinc-600 group-hover:text-amber-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"m9 18 6-6-6-6"})})})]})},t.gemId)})})}function V(){const{selectedClass:s,mode:n}=A(),[d,t]=m.useState("grid"),[r,g]=m.useState("name"),[p,j]=m.useState(null),[v,c]=m.useState(!1),[a,x]=m.useState(""),[h,z]=m.useState({types:["active","support"],acts:[1,2,3,4,5,6,7,8,9,10],sources:["quest","siosa","lilly"],searchTerm:""});m.useEffect(()=>{z(i=>({...i,searchTerm:a}))},[a]);const y=m.useMemo(()=>{const i=s.charAt(0).toUpperCase()+s.slice(1);let C=Object.values(w).filter(l=>{if(!h.types.includes(l.type)||s!=="all"&&!l.availability.some(S=>S.classes.length===0||S.classes.includes(i))||![...new Set(l.availability.map(o=>o.act))].some(o=>h.acts.includes(o))||![...new Set(l.availability.map(o=>o.source))].some(o=>h.sources.includes(o)))return!1;if(h.searchTerm.trim()){const o=h.searchTerm.toLowerCase();return l.name.toLowerCase().includes(o)}return!0});return C.sort((l,u)=>{switch(r){case"name":return l.name.localeCompare(u.name);case"type":return l.type!==u.type?l.type==="active"?-1:1:l.name.localeCompare(u.name);case"act":const f=Math.min(...l.availability.map(b=>b.act)),N=Math.min(...u.availability.map(b=>b.act));return f!==N?f-N:l.name.localeCompare(u.name);default:return 0}}),C},[s,h,r]),k=i=>{j(i),c(!0)};return T(()=>{const i=document.querySelector('input[type="text"]');i&&i.focus()}),e.jsxs("div",{className:"lg:flex lg:gap-6",children:[e.jsx("div",{className:"hidden lg:block lg:w-64 lg:flex-shrink-0",children:e.jsx("div",{className:"sticky top-6",children:e.jsx(F,{filters:h,onFilterChange:z})})}),e.jsxs("div",{className:"lg:flex-1 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-100",children:"Gem Browser"}),e.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Browse all ",Object.keys(w).length," gems with advanced filtering"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsx("div",{className:"sm:flex-1",children:e.jsx(B,{})}),e.jsxs("div",{className:"flex items-center gap-2 bg-zinc-900/60 backdrop-blur-sm border border-white/[0.06] rounded-lg p-1",children:[e.jsx("button",{onClick:()=>t("grid"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${d==="grid"?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"text-zinc-400 hover:text-zinc-200"}`,"aria-label":"Grid view",children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]})}),e.jsx("button",{onClick:()=>t("list"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${d==="list"?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"text-zinc-400 hover:text-zinc-200"}`,"aria-label":"List view",children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),e.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})})]}),e.jsxs("select",{value:r,onChange:i=>g(i.target.value),className:"px-3 py-2 bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] rounded-lg text-sm text-zinc-300 focus:border-amber-500/50 focus:ring-2 focus:ring-amber-500/20 transition-colors",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"act",children:"Sort by Act"}),e.jsx("option",{value:"type",children:"Sort by Type"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),e.jsx("input",{type:"text",value:a,onChange:i=>x(i.target.value),placeholder:"Search gems... (Arc, Determination, etc.)",className:"w-full pl-10 pr-4 py-3 bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] rounded-lg text-zinc-200 placeholder-zinc-500 focus:border-amber-500/50 focus:ring-2 focus:ring-amber-500/20 transition-colors"}),a&&e.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-zinc-300 transition-colors","aria-label":"Clear search",children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsxs("button",{className:"lg:hidden w-full px-4 py-2 bg-zinc-900/60 backdrop-blur-sm border border-white/[0.08] rounded-lg text-sm text-zinc-300 hover:border-amber-500/30 transition-colors flex items-center justify-center gap-2",onClick:()=>alert("Mobile filter panel - TODO"),children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),e.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),e.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),e.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"})]}),"Filters"]}),n==="alt"&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("svg",{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9 12l2 2 4-4"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-green-300 font-medium mb-1",children:"Alt Character Mode Active"}),e.jsx("p",{className:"text-green-400/80",children:"All gems are unlocked on your account. You can purchase any gem from vendors starting in Act 1."})]})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"text-sm text-zinc-500",children:["Showing ",e.jsx("span",{className:"text-zinc-300 font-medium",children:y.length})," of ",Object.keys(w).length," gems"]})}),d==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:e.jsx(O,{gems:y,selectedClass:s,onSelectGem:k})}):e.jsx(D,{gems:y,selectedClass:s,onSelectGem:k})]}),e.jsx(q,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const i=document.querySelector('input[type="text"]');i&&i.focus()},300)}}),e.jsx(W,{gem:p,isOpen:v,onClose:()=>c(!1)})]})}export{V as default};
