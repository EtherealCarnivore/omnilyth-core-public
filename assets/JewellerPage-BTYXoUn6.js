import{r as N,j as e,u as D}from"./index-StS4Kiu4.js";import{c as I}from"./jewellerCalc-Tp4mU2T9.js";import"./colorChances-BUcH6GNe.js";import"./mathUtils-DBoKL8H6.js";function K({prices:x}){const[s,k]=N.useState({sockets:"",str:"",dex:"",int:"",red:"",green:"",blue:""}),[n,p]=N.useState(null),[f,u]=N.useState(""),w=x?.["chromatic-orb"]?.chaosRate,y=x?.["jewellers-orb"]?.chaosRate,g=w&&y;function l(t,r){k(j=>({...j,[t]:r}))}function v(){const t=s.str===""?0:parseInt(s.str,10),r=s.dex===""?0:parseInt(s.dex,10),j=s.int===""?0:parseInt(s.int,10),o=s.red===""?0:parseInt(s.red,10),i=s.green===""?0:parseInt(s.green,10),d=s.blue===""?0:parseInt(s.blue,10);let a=s.sockets===""?null:parseInt(s.sockets,10);if(a===null){const h=o+i+d;h>=2&&h<=6&&(a=h,l("sockets",String(h)))}if(!a||a<2||a>6){u("Total sockets must be between 2 and 6."),p(null);return}if(o<0||i<0||d<0){u("Desired colors must be non-negative."),p(null);return}if(o+i+d>a){u(`Desired colors (${o+i+d}) exceed total sockets (${a}).`),p(null);return}u(""),p(I(a,t,r,j,o,i,d))}const b=s.sockets===""?null:parseInt(s.sockets,10),m=s.sockets!==""&&(isNaN(b)||b<2||b>6);function c(t){t.key==="Enter"&&!m&&v()}function C(t){if(!g)return null;const r=t.chromeCost*w+t.jewellerCost*y;return r>=1e3?Math.round(r).toLocaleString()+"c":r.toFixed(1)+"c"}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-poe-gold",children:"Jeweller's Method Calculator"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Uses the Crafting Bench to add/remove sockets one at a time, locking in desired colors cheaply. Compares every base-chrome size to find the optimal strategy."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-md mx-auto",children:[e.jsxs("div",{className:"sm:col-span-3 max-w-[120px] mx-auto space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-zinc-400 text-center",children:"Sockets"}),e.jsx("input",{type:"number",placeholder:"#",value:s.sockets,onChange:t=>l("sockets",t.target.value),onKeyDown:c,className:"calc-input w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-red-400",children:"STR"}),e.jsx("input",{type:"number",placeholder:"str",value:s.str,onChange:t=>l("str",t.target.value),onKeyDown:c,className:"calc-input w-full bg-poe-red border-poe-red-border focus:ring-red-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-green-400",children:"DEX"}),e.jsx("input",{type:"number",placeholder:"dex",value:s.dex,onChange:t=>l("dex",t.target.value),onKeyDown:c,className:"calc-input w-full bg-poe-green border-poe-green-border focus:ring-green-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-blue-400",children:"INT"}),e.jsx("input",{type:"number",placeholder:"int",value:s.int,onChange:t=>l("int",t.target.value),onKeyDown:c,className:"calc-input w-full bg-poe-blue border-poe-blue-border focus:ring-blue-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-red-400",children:"Red"}),e.jsx("input",{type:"number",placeholder:"R",value:s.red,onChange:t=>l("red",t.target.value),onKeyDown:c,className:"calc-input w-full bg-poe-red border-poe-red-border focus:ring-red-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-green-400",children:"Green"}),e.jsx("input",{type:"number",placeholder:"G",value:s.green,onChange:t=>l("green",t.target.value),onKeyDown:c,className:"calc-input w-full bg-poe-green border-poe-green-border focus:ring-green-500/40"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-center text-blue-400",children:"Blue"}),e.jsx("input",{type:"number",placeholder:"B",value:s.blue,onChange:t=>l("blue",t.target.value),onKeyDown:c,className:"calc-input w-full bg-poe-blue border-poe-blue-border focus:ring-blue-500/40"})]})]}),m&&e.jsx("p",{className:"text-center text-red-400 text-sm",children:"Total sockets must be between 2 and 6."}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:v,disabled:m,className:"calc-button bg-yellow-900/50 hover:bg-yellow-800/50 border-poe-gold/40 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:transform-none",children:"Calculate"})}),f&&!m&&e.jsx("p",{className:"text-center text-red-400 text-sm",children:f}),n&&n.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-zinc-400 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Strategy"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Avg. Chromatics"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Avg. Jewellers"}),g&&e.jsxs("th",{className:"px-4 py-2 text-right",children:["Total Cost",e.jsx("span",{className:"block text-[10px] normal-case tracking-normal opacity-60",children:"(in chaos)"})]})]})}),e.jsx("tbody",{children:n.map((t,r)=>e.jsxs("tr",{className:t.isBest?"bg-poe-jeweller-best-even text-poe-jeweller-best-text border-l-2 border-r-2 border-poe-gold/60":r%2===0?"bg-poe-row-even":"bg-poe-row-odd",children:[e.jsx("td",{className:"px-4 py-2 text-left font-medium",children:t.label}),e.jsx("td",{className:"px-4 py-2 text-right font-mono text-poe-highlight",children:t.chromeCost<1e6?t.chromeCost.toFixed(2):t.chromeCost.toExponential(2)}),e.jsx("td",{className:"px-4 py-2 text-right font-mono",children:t.jewellerCost.toFixed(2)}),g&&e.jsx("td",{className:"px-4 py-2 text-right font-mono text-poe-gold",children:C(t)})]},r))})]})}),n&&n.length===0&&e.jsx("p",{className:"text-center text-red-400",children:"No valid strategy found."})]})}function J(){const{prices:x}=D();return e.jsx("div",{className:"glass-card rounded-2xl p-6 sm:p-8",children:e.jsx(K,{prices:x})})}export{J as default};
