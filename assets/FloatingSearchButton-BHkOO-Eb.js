import{r as h,g as w,j as e}from"./index-DN2UEYwR.js";import{g,F as N}from"./fuse-DVcv4glH.js";function k({key:s,ctrl:t=!1,meta:l=!1,shift:r=!1,alt:a=!1,callback:n,enabled:o=!0,preventDefault:d=!0}){h.useEffect(()=>{if(!o)return;const c=i=>{const x=t&&(i.ctrlKey||i.metaKey),m=l&&i.metaKey,u=r&&i.shiftKey,b=a&&i.altKey;i.key.toLowerCase()===s.toLowerCase()&&((!t||x)&&(!l||m)&&(!r||u)&&(!a||b))&&(d&&i.preventDefault(),n(i))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[s,t,l,r,a,n,o,d])}function q(s,t=!0){k({key:"g",ctrl:!0,callback:s,enabled:t})}const A=[{id:"witch",name:"Witch"},{id:"shadow",name:"Shadow"},{id:"ranger",name:"Ranger"},{id:"duelist",name:"Duelist"},{id:"marauder",name:"Marauder"},{id:"templar",name:"Templar"},{id:"scion",name:"Scion"},{id:"all",name:"All Classes"}];function E(){const{selectedClass:s,setSelectedClass:t}=w(),l=r=>{const a=r.target.value;t(a)};return e.jsxs("div",{className:"class-selector",children:[e.jsx("label",{htmlFor:"class-select",className:"sr-only",children:"Select Character Class"}),e.jsx("select",{id:"class-select",value:s,onChange:l,className:"w-full px-3 py-2 text-sm bg-zinc-900/60 border border-white/[0.06] rounded-lg text-zinc-300 hover:border-amber-500/30 focus:border-amber-500/50 focus:ring-2 focus:ring-amber-500/20 transition-colors",children:A.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]})}const z={keys:["name"],threshold:.3,ignoreLocation:!0,minMatchCharLength:2};function j(s,t){if(t==="all")return!0;const l=t.charAt(0).toUpperCase()+t.slice(1);return s.availability.some(r=>r.classes.length===0||r.classes.includes(l))}function y(s,t){const l=t.charAt(0).toUpperCase()+t.slice(1),r=s.availability.filter(a=>t==="all"||a.classes.length===0||a.classes.includes(l));return r.length===0?1/0:Math.min(...r.map(a=>a.act))}function R(s,t="all",l={}){const{limit:r=50,sortBy:a="relevance"}=l,n=h.useMemo(()=>Object.values(g),[]),o=h.useMemo(()=>new N(n,z),[n]),d=h.useMemo(()=>{if(!s||s.length<2)return n.filter(u=>j(u,t)).sort((u,b)=>u.name.localeCompare(b.name)).slice(0,r);const i=o.search(s).map(m=>m.item).filter(m=>j(m,t));let x=i;return a==="name"?x=[...i].sort((m,u)=>m.name.localeCompare(u.name)):a==="act"&&(x=[...i].sort((m,u)=>{const b=y(m,t),v=y(u,t);return b-v})),x.slice(0,r)},[s,t,a,r,o,n]);return{results:d,totalCount:d.length,hasResults:d.length>0}}function C(s,t){const l=g[s];if(!l)return null;const r=t.charAt(0).toUpperCase()+t.slice(1);return t==="all"?l.availability:l.availability.filter(a=>a.classes.length===0||a.classes.includes(r))}function G(s,t){const l=C(s,t);if(!l||l.length===0)return null;const r=t.charAt(0).toUpperCase()+t.slice(1),a=l.find(c=>c.source==="quest"&&(c.classes.length===0||c.classes.includes(r)));if(a)return a;const n=l.find(c=>c.source==="vendor");if(n)return n;const o=l.find(c=>c.source==="siosa");return o||l.find(c=>c.source==="lilly")}function B(s,t="all"){const l=t.charAt(0).toUpperCase()+t.slice(1),r=[];for(const a of Object.values(g)){const n=a.availability.filter(o=>o.act===s&&(t==="all"||o.classes.length===0||o.classes.includes(l)));n.length>0&&r.push({...a,actAvailability:n})}return r}const f={quest:{icon:"‚úÖ",color:"green",bgClass:"bg-green-500/20",borderClass:"border-green-500/30",textClass:"text-green-400"},vendor:{icon:"üõí",color:"yellow",bgClass:"bg-yellow-500/20",borderClass:"border-yellow-500/30",textClass:"text-yellow-400"},siosa:{icon:"üîì",color:"purple",bgClass:"bg-purple-500/20",borderClass:"border-purple-500/30",textClass:"text-purple-400"},lilly:{icon:"üîì",color:"purple",bgClass:"bg-purple-500/20",borderClass:"border-purple-500/30",textClass:"text-purple-400"},unavailable:{icon:"üîí",color:"red",bgClass:"bg-red-500/20",borderClass:"border-red-500/30",textClass:"text-red-400"}};function S(s){const{act:t,source:l,questName:r,classes:a}=s;switch(l){case"quest":return a&&a.length>0?`Act ${t}: ${r} (${a.join(", ")})`:`Act ${t}: ${r} (all classes)`;case"vendor":return`Act ${t}: Vendor`;case"siosa":return"Act 3: Siosa";case"lilly":return"Act 6: Lilly Roth";default:return"Not available"}}function p({availability:s,compact:t=!1,className:l=""}){if(!s){const n=f.unavailable;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium border ${n.bgClass} ${n.borderClass} ${n.textClass} ${l}`,title:"Not available yet",children:[n.icon," Not available"]})}const r=f[s.source]||f.unavailable,a=S(s);return t?e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded text-xs font-medium border ${r.bgClass} ${r.borderClass} ${r.textClass} ${l}`,title:a,"aria-label":a,children:r.icon}):e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium border ${r.bgClass} ${r.borderClass} ${r.textClass} ${l}`,title:a,"aria-label":a,children:[r.icon," ",s.source==="quest"&&`Act ${s.act}`,s.source==="siosa"&&"Siosa",s.source==="lilly"&&"Lilly Roth",s.source==="vendor"&&"Vendor"]})}function F({gem:s,isOpen:t,onClose:l}){const{selectedClass:r,mode:a}=w();if(h.useEffect(()=>{const i=x=>{x.key==="Escape"&&t&&l()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,l]),h.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),!t||!s)return null;const n=C(s.name,r),o=n?.filter(i=>i.source==="quest")||[],d=n?.find(i=>i.source==="siosa"),c=n?.find(i=>i.source==="lilly");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:l,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-zinc-900/95 backdrop-blur-md border border-white/[0.08] rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto",onClick:i=>i.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"gem-detail-title",children:[e.jsx("div",{className:"sticky top-0 bg-zinc-900/95 backdrop-blur-md border-b border-white/[0.06] p-4 z-10",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:s.icon,alt:s.name,className:"w-16 h-16 rounded border border-white/[0.08]"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{id:"gem-detail-title",className:"text-xl font-medium text-zinc-200 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-zinc-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:s.type==="support"?"text-blue-400":"text-amber-400",children:s.type==="support"?"üîó":"‚ö°"}),s.type==="support"?"Support Gem":"Active Skill Gem"]}),s.requiredLevel&&e.jsxs("span",{children:["‚Ä¢ Requires Level ",s.requiredLevel]})]})]}),e.jsx("button",{onClick:l,className:"p-2 text-zinc-500 hover:text-zinc-200 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[a==="alt"&&e.jsx("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("svg",{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9 12l2 2 4-4"})]}),e.jsxs("div",{className:"text-sm text-green-300",children:[e.jsx("strong",{children:"Alt Character Mode:"})," All gems are unlocked on your account. Purchase from any vendor starting Act 1."]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-zinc-300 mb-3",children:"Availability"}),o.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-400 mb-2",children:"Quest Rewards"}),e.jsx("div",{className:"space-y-2",children:o.map((i,x)=>e.jsx("div",{className:"p-3 rounded-lg bg-zinc-800/40 border border-white/[0.04]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{availability:i}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-zinc-300",children:i.questName}),e.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:i.classes.length===0?"Available for all classes":`Available for: ${i.classes.join(", ")}`})]})]})},x))})]}),d&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-400 mb-2",children:"Special Vendor"}),e.jsx("div",{className:"p-3 rounded-lg bg-zinc-800/40 border border-white/[0.04]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{availability:d}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-zinc-300",children:"Siosa (The Library)"}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:['Complete "',d.questName,`" to unlock Siosa. Removes class restrictions for gems you've unlocked via quests.`]}),e.jsx("div",{className:"text-xs text-amber-400 mt-1",children:"‚ö†Ô∏è Cannot access stash in The Library - bring currency in inventory"})]})]})})]}),c&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-400 mb-2",children:"All Gems Vendor"}),e.jsx("div",{className:"p-3 rounded-lg bg-zinc-800/40 border border-white/[0.04]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{availability:c}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-zinc-300",children:"Lilly Roth (Lioneye's Watch - Act 6+)"}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:['Complete "',c.questName,'" to unlock all gems regardless of class or quest completion.']}),e.jsx("div",{className:"text-xs text-amber-400 mt-1",children:"üí° All gems start at level 1 when purchased from Lilly Roth"})]})]})})]}),(!o||o.length===0)&&r!=="all"&&e.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("svg",{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 8v4M12 16h.01"})]}),e.jsxs("div",{className:"text-sm text-red-300",children:[e.jsx("strong",{children:"Not Available as Quest Reward"}),e.jsxs("div",{className:"text-xs mt-1",children:["This gem is not available as a quest reward for"," ",r.charAt(0).toUpperCase()+r.slice(1),". Use Siosa (Act 3) or Lilly Roth (Act 6) to obtain it."]})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-zinc-300 mb-3",children:"External Resources"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("a",{href:`https://www.poewiki.net/wiki/${encodeURIComponent(s.name)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-zinc-800/60 border border-white/[0.06] hover:border-amber-500/30 text-sm text-zinc-300 hover:text-zinc-100 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"PoE Wiki"]}),e.jsxs("a",{href:`https://www.pathofexile.com/trade/search?q=${encodeURIComponent(s.name)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-zinc-800/60 border border-white/[0.06] hover:border-amber-500/30 text-sm text-zinc-300 hover:text-zinc-100 transition-colors",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),"Trade Search"]})]})]})]})]})})]})}function U({onClick:s,className:t=""}){return e.jsxs("button",{onClick:s,className:`
        lg:hidden fixed bottom-6 right-6 z-40
        w-14 h-14 rounded-full
        bg-amber-500 hover:bg-amber-600
        text-white
        shadow-lg hover:shadow-xl
        transition-all duration-200
        flex items-center justify-center
        active:scale-95
        ${t}
      `,"aria-label":"Search gems (Ctrl+G)",children:[e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),e.jsx("span",{className:"absolute inset-0 rounded-full bg-white opacity-0 group-active:opacity-20 group-active:animate-ping pointer-events-none"}),e.jsx("span",{className:"hidden lg:block absolute -top-2 -left-12 px-2 py-1 bg-zinc-900 text-zinc-300 text-xs rounded border border-white/[0.08] opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Ctrl+G"})]})}export{p as A,E as C,U as F,F as G,G as a,q as b,C as c,B as g,R as u};
